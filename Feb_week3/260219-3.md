# ğŸ“¦ ë°°ì—´ (Array) ì™„ë²½ ì •ë¦¬ ë° GDB ë¶„ì„

## 1. ë°°ì—´ì˜ ê¸°ì´ˆ ê°œë…
* ë™ì¼í•œ ë°ì´í„°í˜•ì„ ëª¨ì•„ì„œ ë‹¤ë£¨ëŠ” ìë£Œêµ¬ì¡°ë‹¤.
* **ë°°ì—´ì˜ ì´ë¦„ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œì´ë‹¤.**
    * **ë©”ëª¨ë¦¬ ì£¼ì†Œì¸ ê²½ìš°:**
      ```c
      int number[5] = { 1,2,3,4,5 }
      ```
      ```gdb
      (gdb) x/xw number
      0x7fffffffe1a0: 0x00000001
      ```
    * **ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ì•„ë‹Œ ê²½ìš° (ì¼ë°˜ ë³€ìˆ˜):**
      ```c
      int a = 1;
      ```
      ```gdb
      (gdb) x/xw a
      0x1:    Cannot access memory at address 0x1
      ```
* ë°°ì—´ì„ ì„ ì–¸í•˜ë©´ ë©”ëª¨ë¦¬ ê³µê°„ì— **ì—°ì†ì ìœ¼ë¡œ** ìƒì„±ëœë‹¤.
  ```gdb
  (gdb) x/5xw number
  0x7fffffffe1a0: 0x00000001      0x00000002      0x00000003      0x00000004
  0x7fffffffe1b0: 0x00000005
  ```
* ì¼ë°˜ ë³€ìˆ˜ë¥¼ í•˜ë‚˜ì”© ì„ ì–¸í•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” ë°°ì—´ì„ ì´ìš©í•˜ë©´ ê´€ë¦¬ì˜ ì¥ì ì´ ìˆë‹¤.
    * e.g.) ì¼ë°˜ ë³€ìˆ˜: ë‹¨ë…ì£¼íƒ, ë°°ì—´: ì•„íŒŒíŠ¸

## 2. ë°°ì—´ì˜ ì¢…ë¥˜ ë° ì„ ì–¸ ë°©ë²•
* **ì¢…ë¥˜:** 1ì°¨ì› ë°°ì—´, ë‹¤ì°¨ì› ë°°ì—´(2ì°¨ì›, 3ì°¨ì› ...)
* **ì„ ì–¸ ë°©ë²•:** ì¼ë°˜ ë³€ìˆ˜ ì„ ì–¸ê³¼ ë™ì¼í•˜ë©° ì¼ë°˜ ë³€ìˆ˜ì˜ ì„ ì–¸ì—ì„œ `[]` ëŒ€ê´„í˜¸ë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤.

### í˜•ì‹
* **ì¼ë°˜ ë³€ìˆ˜:** `ìë£Œí˜• ë³€ìˆ˜ëª…;`
* **1ì°¨ì› ë°°ì—´:** `ìë£Œí˜• ë³€ìˆ˜ëª…[í¬ê¸°];`
* **2ì°¨ì› ë°°ì—´:** `ìë£Œí˜• ë³€ìˆ˜ëª…[í–‰ì˜í¬ê¸°][ì—´ì˜í¬ê¸°];`
* **3ì°¨ì› ë°°ì—´:** `ìë£Œí˜• ë³€ìˆ˜ëª…[ë©´ì˜í¬ê¸°][í–‰ì˜í¬ê¸°][ì—´ì˜í¬ê¸°];`

### ë°°ì—´ ì„ ì–¸ ì˜ˆì‹œì™€ ë©”ëª¨ë¦¬ êµ¬ì¡°
* `int number;` <--  ë©”ëª¨ë¦¬ì— int í˜• ë³€ìˆ˜ 1ê°œ(4byte)ê°€ ìƒì„±ëœë‹¤.
* `int number2[5];` <-- ë©”ëª¨ë¦¬ì— int í˜• ë³€ìˆ˜ 5ê°œ(4byte * 5 = 20byte)ê°€ ìƒì„±ëœë‹¤.

```text
number     number2
+----+     +----+----+----+----+----+
|    |     |    |    |    |    |    |
+----+     +----+----+----+----+----+
 4byte     |--      20byte        --|
```

* `char ch;` <--  ë©”ëª¨ë¦¬ì— char í˜• ë³€ìˆ˜ 1ê°œ(1byte)ê°€ ìƒì„±ëœë‹¤.
* `char ch2[30];` <--  ë©”ëª¨ë¦¬ì— char í˜• ë³€ìˆ˜ 30ê°œ(1byte * 30 = 30byte)ê°€ ìƒì„±ëœë‹¤.

```text
ch         ch2
+----+     +----+----+----+----+----+   
|    |     |    |    |    |    | ...|
+----+     +----+----+----+----+----+
 1byte     |--        30byte      --|
```

---

## 3. ì‹¤ìŠµ: ë©”ëª¨ë¦¬ì˜ í¬ê¸° í™•ì¸í•˜ê¸° (`array1.c`)

```c
// array1.c
// ë©”ëª¨ë¦¬ì˜ í¬ê¸° í™•ì¸í•˜ê¸°
#include <stdio.h>

int main()
{
    int number;      // 4byte
    int number2[4];  // 16byte (sizeof(int) * 4)
    char ch;         // 1byte
    char ch2[30];    // 30byte (sizeof(char) * 30)

    printf("number  size: %ld\n", sizeof(number));
    printf("number2 size: %ld\n", sizeof(number2));
    printf("ch      size: %ld\n", sizeof(ch));
    printf("ch2     size: %ld\n", sizeof(ch2));

    return 0;
}
```

### ì‹¤í–‰ ë° GDB ë¡œê·¸
```bash
$ gcc -g -o array1 array1.c
$ ./array1
number  size: 4
number2 size: 16
ch      size: 1
ch2     size: 30

$ gdb -q ./array1
Reading symbols from ./array1...
(gdb) set debuginfod enabled off
(gdb) b main
(gdb) r
  :
  :
Breakpoint 1, main () at array1.c:6
6       {

(gdb) n 5
number  size: 4
number2 size: 16
ch      size: 1
ch2     size: 30
17          return 0;

(gdb) p sizeof(number)
$1 = 4
(gdb) p sizeof(number2)
$2 = 16
(gdb) p sizeof(ch)
$3 = 1
(gdb) p sizeof(ch2)
$4 = 30

(gdb) c
Continuing.
[Inferior 1 (process 7967) exited normally]
(gdb) q
```

---

## 4. ë°°ì—´ì„ ì´ˆê¸°í™” í•˜ëŠ” ë°©ë²•
* ë°°ì—´ì„ ì´ˆê¸°í™” í•˜ëŠ” ë°©ë²•ì€ ë°°ì—´ì„ ì„ ì–¸í•˜ë©´ì„œ ê°’ì„ ì €ì¥í•œë‹¤.
* ì´ˆê¸°í™” ë°©ë²•ì€ `{` ë¡œ ì‹œì‘í•´ì„œ `}`ë¡œ ëë‚˜ê³  ê°’ê³¼ ê°’ ì‚¬ì´ì—ëŠ” `,` ë¡œ êµ¬ë¶„í•œë‹¤.
    * **í˜•ì‹1:** `ìë£Œí˜• ë³€ìˆ˜ëª…[í¬ê¸°] = { ê°’, ...};`
    * **í˜•ì‹2:** `ìë£Œí˜• ë³€ìˆ˜ëª…[] = { ê°’, ...};`

```text
number2
+----+----+----+----+----+
| 1  | 2  | 3  | 4  | 5  |
+----+----+----+----+----+
|    |    |    |    |  
|    |    |    |    +-- number2[4]
|    |    |    +-- number2[3]
|    |    +-- number2[2]
|    +-- number2[1]
+-- number2[0]    
```

* `int number2[5] = { 1,2,3,4,5 };` // ë°°ì—´ì˜ ì´ˆê¸°í™” ë°©ë²•
* `int number2[] = { 1,2,3,4,5 };`   // ë°°ì—´ì˜ í¬ê¸°ëŠ” ìƒëµí•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.
* `int number2[];`  <-- ë°°ì—´ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šì„ ê²½ìš°ì—ëŠ” í¬ê¸°ëŠ” ìƒëµí•  ìˆ˜ ì—†ë‹¤. (X)
* `int number2[5];` <-- ë°°ì—´ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šì„ ê²½ìš°ì—ëŠ” í¬ê¸°ê°€ ìˆìœ¼ë©´ ê°€ëŠ¥í•˜ë‹¤. (O)

### ì‹¤ìŠµ: ë°°ì—´ì˜ ì´ˆê¸°í™” (`array2.c`, `array3.c`)

```c
// array2.c
// ë°°ì—´ì˜ ì´ˆê¸°í™” ì—ëŸ¬ ì˜ˆì‹œ
#include <stdio.h>

int main()
{
    int number[5] = { 1,2,3,4,5 };
    int number2[]; // í¬ê¸° ìƒëµ ë° ì´ˆê¸°í™” ì•ˆí•¨ (ì—ëŸ¬)

    return 0;
}
```
```bash
$ gcc -o array2 array2.c
array2.c: In function â€˜mainâ€™:
array2.c:8:9: error: array size missing in â€˜number2â€™
    8 |     int number2[];
      |         ^~~~~~~
```

```c
// array3.c
// ì •ìƒì ì¸ ë°°ì—´ì˜ ì´ˆê¸°í™”
#include <stdio.h>

int main()
{
    int number[] = { 1,2,3,4,5 };
    int number2[] = { 1,2,3,4,5 };
    int number3[5];  // ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

    return 0;
}
```

---

## 5. ë°°ì—´ì„ ì ‘ê·¼í•˜ëŠ” ë°©ë²•
* ë°°ì—´ì— ì €ì¥ëœ ê°’ì„ ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” ë°°ì—´ì˜ ë°© ë²ˆí˜¸ë¥¼ ë¶™ì´ë©´ ëœë‹¤.
    * Cì–¸ì–´ì—ì„œëŠ” ë°© ë²ˆí˜¸ëŠ” **ìˆ«ìë§Œ ê°€ëŠ¥í•˜ê³  ë¬¸ìëŠ” ì•ˆëœë‹¤.**
* `int number[5] = { 10, 20, 30 , 40, 50 };`

```text
    number
    |
    +----+----+----+----+----+
    | 10 | 20 | 30 | 40 | 50 |
    +----+----+----+----+----+
    |    |    |    |    |
    |    |    |    |    +-- number[4]
    |    |    |    +-- number[3]
    |    |    +-- number[2]
    |    +-- number[1]
    +-- number[0] <-- ìˆ«ìëŠ” ë°©ì˜ ìœ„ì¹˜ë¥¼ ë§í•œë‹¤. (ì¸ë±ìŠ¤, ì²¨ì)
```

* **ë°°ì—´ì— ì ‘ê·¼í•  ë•Œ:**
    * `number[0]` ìœ¼ë¡œ ìˆ«ìë¡œ ì ‘ê·¼í•˜ë©´ `number[0]` ë²ˆ ë°©ì˜ ê°’ì„ í‘œì‹œí•œë‹¤.
    * `number[ë³€ìˆ˜ëª…]` ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ ë³€ìˆ˜ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ ë°© ë²ˆí˜¸ì— í•´ë‹¹í•œë‹¤.
    * `int i = 0; number[i];` ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ `number[0]` ë°©ì— ì €ì¥ëœ 10ì„ ì˜ë¯¸í•œë‹¤.

### ì‹¤ìŠµ: ë°°ì—´ì˜ ì ‘ê·¼ (`array4.c`)

```c
// array4.c
// ë°°ì—´ì˜ ì ‘ê·¼
#include <stdio.h>

int main()
{
    // ë°°ì—´ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°
    // ë°˜ë³µë¬¸ìœ¼ë¡œ ì¶œë ¥í•  ìˆ˜ ì—†ë‹¤.
    int a, b, c, d, e;
    a = 1, b = 2, c = 3, d = 4, e = 5;

    // ë°°ì—´ì„ ì‚¬ìš©í•œ ê²½ìš°
    // ë°˜ë³µë¬¸ìœ¼ë¡œ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.
    int number[5] = { 1,2,3,4,5 };
    /*
     * numberì˜ ë°°ì—´ ë©”ëª¨ë¦¬ êµ¬ì¡°
     *
     * ë°°ì—´ì˜ ì‹œì‘ ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘í•œë‹¤.
     *
     * number
     * +----+----+----+----+----+
     * | 10 | 20 | 30 | 40 | 50 |
     * +----+----+----+----+----+
     * |    |    |    |    |
     * |    |    |    |    +-- number[4]
     * |    |    |    +-- number[3]
     * |    |    +-- number[2]
     * |    +-- number[1]
     * +-- number[0] <-- ìˆ«ìëŠ” ë°©ì˜ ìœ„ì¹˜ë¥¼ ë§í•œë‹¤. (ì¸ë±ìŠ¤, ì²¨ì)
     */

     printf("%d\n", a);  // 1
     printf("%d\n", b);  // 2
     printf("%d\n", c);  // 3
     printf("%d\n", d);  // 4
     printf("%d\n", e);  // 5

     printf(">>> ë°°ì—´ ì¶œë ¥ <<<\n");
     printf("%d\n", number[0]);  // 1
     printf("%d\n", number[1]);  // 2
     printf("%d\n", number[2]);  // 3
     printf("%d\n", number[3]);  // 4
     printf("%d\n", number[4]);  // 5

     printf(">>> ë°˜ë³µë¬¸ìœ¼ë¡œ ë°°ì—´ ì¶œë ¥ <<<\n");
     for(int i = 0; i < 5; i++)  // 0 1 2 3 4
        printf("%d\n", number[i]);

    return 0;
}
```

### ì‹¤í–‰ ê²°ê³¼ ë° GDB ìƒì„¸ ë¶„ì„
```bash
$ gcc -g -o array4 array4.c
$ ./array4
1
2
3
4
5
>>> ë°°ì—´ ì¶œë ¥ <<<
1
2
3
4
5
>>> ë°˜ë³µë¬¸ìœ¼ë¡œ ë°°ì—´ ì¶œë ¥ <<<
1
2
3
4
5
```

```gdb
$ gdb -q ./array4
Reading symbols from ./array4...
(gdb) set debuginfod enabled off
(gdb) b 50
(gdb) i b
Num     Type           Disp Enb Address            What
1       breakpoint     keep y   0x0000000000001334 in main at array4.c:50

(gdb) r
Starting program: /home/linuxadmin/ë°”íƒ•í™”ë©´/c_workspace/array4
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
1
2
3
4
5
>>> ë°°ì—´ ì¶œë ¥ <<<
1
2
3
4
5
>>> ë°˜ë³µë¬¸ìœ¼ë¡œ ë°°ì—´ ì¶œë ¥ <<<
1
2
3
4
5

Breakpoint 1, main () at array4.c:50
50          return 0;
```

#### ë°°ì—´ ì£¼ì†Œ ë©”ëª¨ë¦¬ êµ¬ì¡° ë„ì‹í™”
```text
 number
 +----+----+----+----+----+
 | 1  | 2  | 3  | 4  | 5  |
 +----+----+----+----+----+
 |    |    |    |    |
 |    |    |    |    +-- number[4] 0x7fffffffe1b0 ~ b3  &number[4](0x7fffffffe1b0)
 |    |    |    +-- number[3] 0x7fffffffe1ac ~ af &number[3](0x7fffffffe1ac)
 |    |    +-- number[2] 0x7fffffffe1a8 ~ ab  &number[2](0x7fffffffe1a8)
 |    +-- number[1] 0x7fffffffe1a4 ~ a7 &number[1](0x7fffffffe1a4)
 +-- number[0] 0x7fffffffe1a0 ~ a3  &number[0](0x7fffffffe1a0)
```

```gdb
(gdb) p number
$1 = {1, 2, 3, 4, 5}
(gdb) p &number
$2 = (int (*)[5]) 0x7fffffffe1a0
(gdb) p number[0]
$3 = 1
(gdb) p number[1]
$4 = 2
(gdb) p number[2]
$5 = 3
(gdb) p number[3]
$6 = 4
(gdb) p number[4]
$7 = 5
(gdb) p &number[0]
$8 = (int *) 0x7fffffffe1a0
(gdb) p &number[1]
$9 = (int *) 0x7fffffffe1a4
(gdb) p &number[2]
$10 = (int *) 0x7fffffffe1a8
(gdb) p &number[3]
$11 = (int *) 0x7fffffffe1ac
(gdb) p &number[4]
$12 = (int *) 0x7fffffffe1b0
```

* ì•„ë˜ì²˜ëŸ¼ ì£¼ì†Œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ê°ìì˜ ì£¼ì†Œê°€ ë‹¤ë¥´ë¯€ë¡œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ì €ì¥ë˜ì–´ ìˆëŠ” ê°’ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.
```gdb
(gdb) x/xw 0x7fffffffe1a0
0x7fffffffe1a0: 0x00000001
(gdb) x/xw 0x7fffffffe1a4
0x7fffffffe1a4: 0x00000002
(gdb) x/xw 0x7fffffffe1a8
0x7fffffffe1a8: 0x00000003
(gdb) x/xw 0x7fffffffe1ac
0x7fffffffe1ac: 0x00000004
(gdb) x/xw 0x7fffffffe1b0
0x7fffffffe1b0: 0x00000005
(gdb)
```

* ì—°ì‚°ì ìš°ì„  ìˆœìœ„ì— ì˜í•´ì„œ `&` ì—°ì‚°ìê°€ ë” ë‚®ë‹¤.
```text
&number[0]
|    |
|    |
+----+
   2
```

```gdb
(gdb) x/xw &number[0]
0x7fffffffe1a0: 0x00000001
(gdb) x/xw &number[1]
0x7fffffffe1a4: 0x00000002
(gdb) x/xw &number[2]
0x7fffffffe1a8: 0x00000003
(gdb) x/xw &number[3]
0x7fffffffe1ac: 0x00000004
(gdb) x/xw &number[4]
0x7fffffffe1b0: 0x00000005

(gdb) x/xw number
0x7fffffffe1a0: 0x00000001

(gdb) x/5xw number
0x7fffffffe1a0: 0x00000001      0x00000002      0x00000003      0x00000004
0x7fffffffe1b0: 0x00000005

(gdb) c
Continuing.
[Inferior 1 (process 8410) exited normally]
(gdb) q
```

---


