# 🔤 문자열 배열 대입과 메모리 복사

## 1. 배열 대입 연산의 제한 (중요)

* **배열 이름은 주소입니다.**
* **에러 발생 원인:** * 배열 변수인 `ch`도 메모리 주소이고, 우변의 `"ABCDEF"`도 메모리 어딘가에 저장된 문자열의 시작 주소입니다.
    * 주소 값 자체를 대입 연산자(`=`)로 변경할 수 없으므로, 선언 이후에 문자열을 직접 넣으면 에러가 발생합니다.

### 1) 선언과 동시에 초기화 (가능)
컴파일러가 메모리 어딘가에 저장된 `"ABCDEF"`의 문자들을 `ch` 배열 방에 하나씩 복사해서 저장해 줍니다.
```c
char ch[] = "ABCDEF"; // 가능 (배열 크기 생략 가능)
```

### 2) 선언 이후 대입 (불가능)
```c
char ch[7];
ch = "ABCDEF"; // 불가능 (에러: array type 'char [7]' is not assignable)
```
* **해결 방법:** 선언 이후에 문자열을 저장하려면 `strcpy()`, `strncpy()`, `scanf()` 등의 함수를 이용해야 합니다.

---

## 2. 실습: 문자열 복사 함수 (`array6.c`)

### `strcpy()` 함수 주의사항
* **보안 취약점:** 입력값의 길이를 검사하지 않고 복사하므로 **BOF(Buffer OverFlow)**가 발생할 수 있습니다.
* 실무에서는 보다 안전한 `strncpy()` 등을 권장하지만, 학습 단계에서는 원리 파악을 위해 사용합니다.

```c
// array6.c
#include <stdio.h>
#include <string.h>  // strcpy 함수 사용을 위한 헤더

int main()
{
    char ch[] = "ABCDEF";    // 선언과 동시에 초기화 (가능)
    char ch2[7] = "111111";

    // ch = "ABCDEF";        // 선언 후 대입 (불가능)

    // strcpy(목적지, 출발지)
    strcpy(ch2, "AAAAAA");  // "AAAAAA"를 ch2 배열에 복사

    printf("ch = %s, ch2 = %s\n", ch, ch2); // ch = ABCDEF, ch2 = AAAAAA

    return 0;
}
```

---

## 3. GDB 설정 및 메모리 분석

### 1) GDB 설정 파일 (`~/.gdbinit`)
GDB 실행 시 매번 입력해야 하는 설정을 자동화할 수 있습니다.
* **`~` (Tilde):** 홈 디렉터리(`/home/linuxadmin`)를 의미합니다.

```bash
# 설정 파일 생성 및 수정 (nano 편집기 활용)
$ nano ~/.gdbinit
# 파일 안에 아래 내용 입력 후 저장 (Ctrl+x > y > Enter)
set debuginfod enabled off

# 설정 확인
$ cat ~/.gdbinit
set debuginfod enabled off
```

### 2) GDB 메모리 정밀 분석
`ch`와 `ch2`가 메모리에 어떻게 연속해서 배치되어 있는지 확인합니다.

```gdb
(gdb) b main
(gdb) r
(gdb) n  # 코드 진행 후...

(gdb) p &ch[0]
$4 = 0x7fffffffe1aa "ABCDEF"  # ch의 시작 주소

(gdb) p &ch2[0]
$5 = 0x7fffffffe1b1 "111111"  # ch2의 시작 주소

# 배열 이름으로 메모리 주소 확인 (16진수)
(gdb) x/2xw ch 
0x7fffffffe1aa: 0x44434241      0x31004645  # 'A', 'B', 'C', 'D' 등의 아스키 값

# 메모리 크기를 크게 하여 인접한 변수 함께 확인
(gdb) x/4xw ch
0x7fffffffe1aa: 0x44434241      0x31004645      0x31313131      0xf4000031
```

---

## 4. [LAB] 사용자 정보 입력 프로그램 (`array7.c`)

문자열 배열과 `scanf`를 이용하여 정보를 입력받고 출력하는 예제입니다.

### 실행 예시
```bash
$ ./array7
이름: 홍길동
연락처: 010-1234-5678
나이: 12

입력한 정보는 아래와 같습니다.
이름: 홍길동, 연락처: 010-1234-5678, 나이: 12
```

---
