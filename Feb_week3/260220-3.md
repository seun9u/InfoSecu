# ğŸ” ì‹¤ìŠµ: strlen() í•¨ìˆ˜ êµ¬í˜„ ë° GDB ì •ë°€ ë¶„ì„

`strlen()` í•¨ìˆ˜ëŠ” ë¬¸ìì—´ì˜ ì‹œì‘ ì£¼ì†Œë¥¼ ë°›ì•„ **NUL ë¬¸ì(`\0`)**ë¥¼ ë§Œë‚  ë•Œê¹Œì§€ì˜ ë¬¸ì ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ì…ë‹ˆë‹¤. ì§ì ‘ ì´ë¥¼ êµ¬í˜„í•´ë³´ê³  GDBë¥¼ í†µí•´ ë©”ëª¨ë¦¬ ë‚´ë¶€ ë™ì‘ì„ í™•ì¸í•©ë‹ˆë‹¤.

---

## 1. strlen() í•¨ìˆ˜ ì§ì ‘ êµ¬í˜„ (`mystrlen.c`)

### ì†ŒìŠ¤ ì½”ë“œ
```c
// mystrlen.c
// strlen í•¨ìˆ˜ì˜ ì›í˜•: size_t strlen(const char *s);
#include <stdio.h>
#include <string.h>

size_t mystrlen(const char *s);

int main()
{
    char buf[100] = "Hello C!";
    // ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ì™€ ì§ì ‘ ë§Œë“  í•¨ìˆ˜ ê²°ê³¼ ë¹„êµ
    printf("%ld %ld\n", strlen(buf), strlen("Information Security"));
    printf("%ld\n", mystrlen(buf));
    printf("%ld\n", mystrlen("Information Security"));
    return 0;
}

size_t mystrlen(const char *s)
{
    unsigned int count = 0;
    
    //while(*s) {
    while(*s != '\0') {
        count++;
        s++;
    }

    return count;
}
```

---

## 2. ì‹¤í–‰ ê²°ê³¼ ë° GDB ìƒì„¸ ë¶„ì„

### ğŸ’» ì‹¤í–‰ ê²°ê³¼
```bash
$gcc -g -o mystrlen mystrlen.c$ ./mystrlen
8 20
8
20
```



### ğŸ GDB ìƒì„¸ ë””ë²„ê¹… ë¡œê·¸ ë° ì„¤ëª…

```gdb
$ gdb -q ./mystrlen
Reading symbols from ./mystrlen...
(gdb) list           # ì†ŒìŠ¤ ì½”ë“œ í™•ì¸
(gdb) list
(gdb) b 12           # main í•¨ìˆ˜ì˜ 12í–‰(ì²« ë²ˆì§¸ mystrlen í˜¸ì¶œ)ì— ì¤‘ë‹¨ì  ì„¤ì •
Breakpoint 1 at 0x123a: file mystrlen.c, line 12.
(gdb) r              # í”„ë¡œê·¸ë¨ ì‹¤í–‰
Starting program: ...
12          printf("%ld\n", mystrlen(buf));
  
(gdb) p/x &buf       # buf ë°°ì—´ì˜ ì‹¤ì œ ë©”ëª¨ë¦¬ ì£¼ì†Œ í™•ì¸ (16ì§„ìˆ˜)
$2 = 0x7fffffffe150

(gdb) s              # mystrlen í•¨ìˆ˜ ë‚´ë¶€ë¡œ ì§„ì… (Step Into)
mystrlen (s=0x7fffffffe150 "Hello C!") at mystrlen.c:19
19          unsigned int count = 0;

(gdb) n              # count ë³€ìˆ˜ ì´ˆê¸°í™” ì‹¤í–‰
22          while(*s != '\0') {

(gdb) display count  # count ë³€ìˆ˜ë¥¼ ìë™ ì¶œë ¥ í•­ëª©ìœ¼ë¡œ ë“±ë¡
1: count = 0
(gdb) display s      # í¬ì¸í„° s(ì£¼ì†Œ)ë¥¼ ìë™ ì¶œë ¥ í•­ëª©ìœ¼ë¡œ ë“±ë¡
2: s = 0x7fffffffe150 "Hello C!"

(gdb) p *s           # í˜„ì¬ í¬ì¸í„° sê°€ ê°€ë¦¬í‚¤ëŠ” ì‹¤ì œ ë¬¸ì ê°’ í™•ì¸
$3 = 72 'H'          # ì²« ë²ˆì§¸ ë¬¸ì 'H'ì˜ ì•„ìŠ¤í‚¤ ê°’ì€ 72

(gdb) n              # count++ ì‹¤í–‰
23              count++;
1: count = 0
2: s = 0x7fffffffe150 "Hello C!"

(gdb) n              # s++ ì‹¤í–‰ (ì£¼ì†Œê°’ì´ 1 ì¦ê°€)
24              s++;
1: count = 1
2: s = 0x7fffffffe150 "Hello C!"

(gdb) n              # ë‹¤ì‹œ while ì¡°ê±´ë¬¸ ê²€ì‚¬ ë‹¨ê³„ë¡œ ì´ë™
22          while(*s != '\0') {
1: count = 1
2: s = 0x7fffffffe151 "ello C!" # ì£¼ì†Œê°€ 1 ì¦ê°€í•˜ì—¬ 'e'ë¥¼ ê°€ë¦¬í‚´

(gdb) p *s           # í˜„ì¬ ë¬¸ì í™•ì¸
$4 = 101 'e'

(gdb) n              # count++ ì‹¤í–‰
23              count++;
1: count = 1
2: s = 0x7fffffffe151 "ello C!"

(gdb) n              # s++ ì‹¤í–‰
24              s++;
1: count = 2
2: s = 0x7fffffffe151 "ello C!"

(gdb) n              # ë‹¤ì‹œ ì¡°ê±´ë¬¸ ê²€ì‚¬
22          while(*s != '\0') {
1: count = 2
2: s = 0x7fffffffe152 "llo C!"

(gdb) n
24              s++;
1: count = 3
2: s = 0x7fffffffe152 "llo C!"

(gdb) n
22          while(*s != '\0') {
1: count = 3
2: s = 0x7fffffffe153 "lo C!"

(gdb) p *s
$5 = 108 'l'

# --- ì¤‘ëµ: ë¬¸ì 'l', 'o', ' ', 'C', '!' ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ íƒìƒ‰ ---

(gdb) n
22          while(*s != '\0') {
1: count = 7
2: s = 0x7fffffffe157 "!" # ë§ˆì§€ë§‰ ë¬¸ì '!' ìœ„ì¹˜

(gdb) p *s
$9 = 33 '!'

(gdb) n
23              count++;
1: count = 7
2: s = 0x7fffffffe157 "!"
(gdb) n
24              s++;
1: count = 8
2: s = 0x7fffffffe157 "!"
(gdb) n
22          while(*s != '\0') {
1: count = 8
2: s = 0x7fffffffe158 "" # sê°€ '\0' ìœ„ì¹˜ì— ë„ë‹¬í•¨
```

### ğŸ“ ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒ ìƒì„¸ ë„ì‹í™”
GDB ëª…ë ¹ì–´ `x/3xw s-count`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ ì‹œì‘ ì£¼ì†Œ(`0x...150`)ë¶€í„° í• ë‹¹ëœ ë©”ëª¨ë¦¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.



```text
(gdb) x/3xw s-count
0x7fffffffe150: 0x6c6c6548      0x2143206f      0x00000000                  
                   | | | |         | | | |         | | | |                    
                   | | | |         | | | |         | | | +-- 0x7fffffffe158 '\0' (NUL ë°œê²¬!)
                   | | | |         | | | |         | | +-- 0x7fffffffe159 (Garbage)
                   | | | |         | | | |         | +-- 0x7fffffffe15a (Garbage)
                   | | | |         | | | |         +-- 0x7fffffffe15b (Garbage)
                   | | | |         | | | +-- 0x7fffffffe154 'o' (0x6f)
                   | | | |         | | +-- 0x7fffffffe155 ' ' (0x20)
                   | | | |         | +-- 0x7fffffffe156 'C' (0x43)
                   | | | |         +-- 0x7fffffffe157 '!' (0x21)
                   | | | +-- 0x7fffffffe150 'H' (0x48)
                   | | +-- 0x7fffffffe151 'e' (0x65)
                   | +-- 0x7fffffffe152 'l' (0x6c)
                   +-- 0x7fffffffe153 'l' (0x6c)
```

### ğŸ ì¡°ê±´ ì¢…ë£Œ ë° ë¦¬í„´ê°’ ì²˜ë¦¬ ë¶„ì„

```gdb
(gdb) p *s          # í˜„ì¬ sê°€ ê°€ë¦¬í‚¤ëŠ” ê°’ í™•ì¸
$10 = 0 '\000'      # NUL ë¬¸ìì„
(gdb) p/x *s
$11 = 0x0

(gdb) x/xb s        # ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ 16ì§„ìˆ˜ ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì§ì ‘ í™•ì¸
0x7fffffffe158: 0x00

# nì„ ì…ë ¥í•˜ë©´ while(*s != '\0') ì¡°ê±´ì‹ì´ ê±°ì§“ì´ ë˜ì–´ ë£¨í”„ë¥¼ íƒˆì¶œí•©ë‹ˆë‹¤.
(gdb) n
27          return count;
1: count = 8        # ìµœì¢… ì¹´ìš´íŠ¸ 8 ë°˜í™˜ ì¤€ë¹„
2: s = 0x7fffffffe158 ""

(gdb) n
28      }

(gdb) i r eax       # í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì´ ë‹´ê¸°ëŠ” eax ë ˆì§€ìŠ¤í„° í™•ì¸
eax            0x8                 8 # 8ì´ ì •ìƒì ìœ¼ë¡œ ë¦¬í„´ë¨

(gdb) n
8                   # printf ì¶œë ¥ ê²°ê³¼
main () at mystrlen.c:13
13          printf("%ld\n", mystrlen("Information Security"));

(gdb) s             # "Information Security" ë¬¸ìì—´ë¡œ ë‹¤ì‹œ í•¨ìˆ˜ ì§„ì…
mystrlen (s=0x555555556012 "Information Security") at mystrlen.c:19
19          unsigned int count = 0;
1: count = 8        # (ì´ì „ count ê°’ì´ display ì„¤ì • ë•Œë¬¸ì— ë³´ì´ëŠ” ê²ƒ)
2: s = 0x555555556012 "Information Security"

(gdb) x/s 0x555555556012 # ë¦¬í„°ëŸ´ ë¬¸ìì—´ì˜ ì£¼ì†Œ ë‚´ìš© í™•ì¸
0x555555556012: "Information Security"

(gdb) c             # í”„ë¡œê·¸ë¨ ì¢…ë£Œê¹Œì§€ ì§„í–‰
Continuing.
20
[Inferior 1 (process 8416) exited normally]
(gdb) q
```
