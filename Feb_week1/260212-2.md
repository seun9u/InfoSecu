# π“ Cμ–Έμ–΄ ν¬μΈν„° (Pointer) μ™„λ²½ μ •λ¦¬

## 1. ν¬μΈν„°μ κΈ°μ΄ κ°λ…

### 1) μ£Όμ† μ—°μ‚°μ (`&`)
λ³€μκ°€ λ©”λ¨λ¦¬ κ³µκ°„ μ–΄λ””μ— μ„μΉν•λ”μ§€ μ•μ•„λ‚΄κΈ° μ„ν•΄ μ‚¬μ©ν•©λ‹λ‹¤.
* **ν•μ‹:** `&λ³€μλ…`
* **νΉμ§•:**
    * λ³€μμ μ‹μ‘ μ£Όμ†(κ°€μ¥ λ‚®μ€ λ°”μ΄νΈμ μ£Όμ†)λ¥Ό λ°ν™ν•©λ‹λ‹¤.

### 2) ν¬μΈν„° λ³€μ (`*`)
* **μ •μ:** **λ©”λ¨λ¦¬μ μ£Όμ†**λ¥Ό μ €μ¥ν•λ” λ³€μμ…λ‹λ‹¤.
* **ν•„μ”μ„±:** ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ§€ μ•μΌλ©΄ ν•΄κ²°ν•  μ μ—†λ” λ¬Έμ λ“¤(λ™μ  ν• λ‹Ή, μ°Έμ΅°μ— μν• νΈμ¶ λ“±)μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ ν•„μμ μ…λ‹λ‹¤.

### 3) ν¬μΈν„° μ„ μ–Έ λ°©λ²•
μ•„λ ν•μ‹μ€ λ¨λ‘ λ™μΌν•κ² λ™μ‘ν•μ§€λ§, λ³΄ν†µ μλ£ν• λ’¤μ— λ¶™μ΄κ±°λ‚ λ³€μλ… μ•μ— λ¶™μ—¬ μ‚¬μ©ν•©λ‹λ‹¤.
```c
int *p;  // κ¶μ¥
int* p;
int * p;
```

---

## 2. μ•„ν‚¤ν…μ²λ³„ ν¬μΈν„° ν¬κΈ° (λ©”λ¨λ¦¬ μ£Όμ† ν¬κΈ°)
μ‹¤ν–‰ νμΌμ΄ μ–΄λ–¤ λΉ„νΈ(bit)λ΅ μ»΄νμΌλλλƒμ— λ”°λΌ μ£Όμ† κ³µκ°„μ ν¬κΈ°κ°€ λ‹¬λΌμ§‘λ‹λ‹¤.

| μ»΄νμΌ ν™κ²½ | μ£Όμ† ν¬κΈ° | ν¬μΈν„° λ³€μ ν¬κΈ° (`sizeof`) |
| :--- | :--- | :--- |
| **32-bit** | 4 Byte | 4 Byte |
| **64-bit** | 8 Byte | 8 Byte |

---

## 3. μ‹¤μµ 1: ν¬μΈν„°μ™€ λ©”λ¨λ¦¬ κµ¬μ΅° (`ex_pointer1.c`)

### μ†μ¤ μ½”λ“
```c
// ex_pointer1.c
#include <stdio.h>

int main() {
    int a = 7;
    int *p;
    
    p = &a; // λ³€μ aμ μ£Όμ†λ¥Ό ν¬μΈν„° λ³€μ pμ— μ €μ¥

    /* [λ©”λ¨λ¦¬ κµ¬μ΅° λ„μ‹ν™”]
       
       1. int a = 7;
          κ°’: 7 (2μ§„μ: 00000111...)
          μ£Όμ†: 0xffffd314 (μμ‹)
       
          +---+---+---+---+
       a: | 7 | 0 | 0 | 0 |
          +---+---+---+---+
          0x14 0x15 0x16 0x17 (μ£Όμ†)

       2. int *p = &a;
          κ°’: 0xffffd314 (aμ μ£Όμ†)
       
          +------------+
       p: | 0xffffd314 |
          +------------+
    */

    printf("&a = %p, p = %p\n", &a, p);
    return 0;
}
```

### μ‹¤ν–‰ κ²°κ³Ό (μ•„ν‚¤ν…μ²λ³„ μ°¨μ΄)

#### 64bit ν™κ²½ (κΈ°λ³Έ)
```bash
$gcc -g -o ex_pointer1 ex_pointer1.c$ ./ex_pointer1
&a = 0x7fffe358670c, p = 0x7fffe358670c
# μ£Όμ†κ°€ 8λ°”μ΄νΈ(16μ§„μ 12μλ¦¬ μ΄μƒ)λ΅ ν‘ν„λ¨
```

#### 32bit ν™κ²½ (`-m32` μµμ…)
```bash
$gcc -m32 -g -o ex_pointer1 ex_pointer1.c$ ./ex_pointer1
&a = 0xffdcf234, p = 0xffdcf234
# μ£Όμ†κ°€ 4λ°”μ΄νΈ(16μ§„μ 8μλ¦¬)λ΅ ν‘ν„λ¨
```

---

## 4. GDBλ¥Ό μ΄μ©ν• λ©”λ¨λ¦¬ μ •λ°€ λ¶„μ„

### 32bit ν™κ²½ λ””λ²„κΉ… μμ‹
λ³€μ `a`μ™€ ν¬μΈν„° `p`μ κ΄€κ³„λ¥Ό GDBλ΅ ν™•μΈν•©λ‹λ‹¤.

```gdb
$ gdb -q ex_pointer1

(gdb) b main
(gdb) r
(gdb) n
7           int a = 7;
(gdb) n
9           p = &a;
(gdb) n

# 1. μ£Όμ† λ° κ°’ ν™•μΈ
(gdb) p &a
$1 = (int *) 0xffffd314    <-- aμ μ£Όμ†

(gdb) p p
$2 = (int *) 0xffffd314    <-- pκ°€ κ°€μ§€κ³  μλ” κ°’ (aμ μ£Όμ†μ™€ λ™μΌ)

(gdb) p &p
$3 = (int **) 0xffffd318   <-- ν¬μΈν„° λ³€μ p μμ²΄μ μ£Όμ†

# 2. λ©”λ¨λ¦¬ λ‚΄λ¶€ κ°’ ν™•μΈ (x/xw)
(gdb) x/xw &a
0xffffd314:     0x00000007 <-- aμ μ£Όμ†μ— λ“¤μ–΄μλ” κ°’ (7)

(gdb) x/xw &p
0xffffd318:     0xffffd314 <-- pμ μ£Όμ†μ— λ“¤μ–΄μλ” κ°’ (aμ μ£Όμ†)
```

### π’΅ ν•µμ‹¬ μ”μ•½
* **`p = &a;` μ μλ―Έ:**
    * **ν”Όμ—°μ‚°μ:** `a` (μ—°μ‚°μ λ€μƒ)
    * **μ—°μ‚°μ:** `&` (μ£Όμ† μ—°μ‚°μ)
    * `p`λΌλ” λ³€μμ— `a`μ **μ‹μ‘ μ£Όμ†**λ¥Ό λ€μ…ν•λ‹¤.

---

## 5. κ°„μ ‘ μ°Έμ΅° μ—°μ‚°μ (`*`)

### `*` κΈ°νΈμ 3κ°€μ§€ μ©λ„
1. **μ‚°μ  μ—°μ‚°μ (κ³±ν•κΈ°):** `3 * a`
2. **ν¬μΈν„° μ„ μ–Έ:** `int *p;` (μ£Όμ†λ¥Ό λ‹΄λ” λ³€μμ„μ„ ν‘μ‹)
3. **κ°„μ ‘ μ°Έμ΅° μ—°μ‚°μ (Dereference):** `*p` (ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” μ£Όμ†λ΅ κ°€μ„ κ°’μ„ κ°€μ Έμ΄)

### μ‹¤μµ μ½”λ“ (`ex_pointer2.c`)
```c
// ex_pointer2.c
#include <stdio.h>

int main() {
    int a = 7;
    int *p = NULL; // ν¬μΈν„° μ΄κΈ°ν™”

    p = &a;

    // λ‹¤μ–‘ν• λ°©λ²•μΌλ΅ κ°’ μ ‘κ·Όν•κΈ°
    // *&a  -> aμ μ£Όμ†(&)λ΅ κ°€μ„ κ°’μ„ μ°Έμ΅°(*) -> κ²°κµ­ a
    // *p   -> pκ°€ κ°€λ¦¬ν‚¤λ” μ£Όμ†μ κ°’ -> a
    // **&p -> pμ μ£Όμ†(&)λ΅ κ°€μ„(*), κ·Έ κ°’(aμ μ£Όμ†)μ„ λ‹¤μ‹ μ°Έμ΅°(*) -> a
    
    printf("%d %d %d %d\n", a, *&a, *p, **&p);
    // μ¶λ ¥: 7 7 7 7

    return 0;
}
```

---

## 6. [LAB] ν•¨μ νΈμ¶ λ°©μ‹ (Call by ...)

### 1) Call by Value (κ°’μ— μν• νΈμ¶)
* ν•¨μμ μΈμλ΅ λ³€μμ **κ°’(Value)**μ„ λ³µμ‚¬ν•΄μ„ μ „λ‹¬ν•©λ‹λ‹¤.
* ν•¨μ λ‚΄λ¶€μ—μ„ κ°’μ„ λ³€κ²½ν•΄λ„ μ›λ³Έ λ³€μμ—λ” μν–¥μ„ μ£Όμ§€ μ•μµλ‹λ‹¤.

#### μ‹¤μµ μ½”λ“ (`ex_call_by_value.c`)
```c
#include <stdio.h>

void swap(int a, int b);

int main()
{
    int a = 1, b = 2;

    printf("main() Before: a = %d, b = %d\n", a, b); // 1 2
    swap(a, b);
    printf("main() After: a = %d, b = %d\n", a, b); // 1 2 (λ³€κ²½ μ•λ¨)

    return 0;
}

void swap(int a, int b)
{
    int temp;
    temp = a;
    a = b;
    b = temp;
    printf("swap(): a = %d, b = %d\n", a, b); // 2 1 (ν•¨μ λ‚΄λ¶€μ—μ„λ” λ³€κ²½λ¨)
}
```

#### μ‹¤ν–‰ κ²°κ³Ό
```bash
$gcc -o ex_call_by_value  ex_call_by_value.c$ ./ex_call_by_value
main() Before: a = 1, b = 2
swap(): a = 2, b = 1
main() After: a = 1, b = 2
```
> **κ²°κ³Ό λ¶„μ„:** `main` ν•¨μμ— μλ” `a`μ™€ `b`μ κ°’μ€ λ°”λ€μ§€ μ•μ•μµλ‹λ‹¤.

---

### 2) Call by Reference (μ°Έμ΅°μ— μν• νΈμ¶)
* ν•¨μμ μΈμλ΅ λ³€μμ **μ£Όμ†(Address)**λ¥Ό μ „λ‹¬ν•©λ‹λ‹¤.
* ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ—¬ μ›λ³Έ λ³€μμ κ°’μ„ μ§μ ‘ λ³€κ²½ν•  μ μμµλ‹λ‹¤.

#### μ‹¤μµ μ½”λ“ (`ex_call_by_reference.c`)
```c
#include <stdio.h>

void swap(int *a, int *b);

int main()
{
    int a = 1, b = 2;

    printf("main() Before: a = %d, b = %d\n", a, b); // 1 2
    swap(&a, &b); // μ£Όμ†κ°’μ„ μ „λ‹¬ (&)
    printf("main() After: a = %d, b = %d\n", a, b); // 2 1 (λ³€κ²½λ¨)

    return 0;
}

void swap(int *a, int *b) // ν¬μΈν„°λ΅ λ°›μ (*)
{
    int temp;
    temp = *a; // *aλ” mainμ aλ¥Ό κ°€λ¦¬ν‚΄
    *a = *b;
    *b = temp;
    printf("swap(): a = %d, b = %d\n", *a, *b);
}
```

#### μ‹¤ν–‰ κ²°κ³Ό
```bash
$gcc -o ex_call_by_reference ex_call_by_reference.c$ ./ex_call_by_reference
main() Before: a = 1, b = 2
swap(): a = 2, b = 1
main() After: a = 2, b = 1
```
> **κ²°κ³Ό λ¶„μ„:** μ£Όμ†λ¥Ό ν†µν•΄ μ ‘κ·Όν–μΌλ―€λ΅ `main` ν•¨μμ μ›λ³Έ λ³€μ κ°’μ΄ μ„±κ³µμ μΌλ΅ λ³€κ²½λμ—μµλ‹λ‹¤.
